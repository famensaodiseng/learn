<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    <canvas id = "demo"></canvas>
    <input type="button" id = "left" value = "left">
    <input type="button" id = "right" value = "right">
    <input type="button" id = "up" value ="up">
    <input type="button" id = "down" value = "down">
    <script type="text/javascript">
    var canvas = document.querySelector("#demo");
    canvas.width = 600;
    canvas.height = 600;
    canvas.style.border = "1px solid #000";
    var ctx = canvas.getContext("2d");
    var speed = 10;
    var cenX = canvas.width / 2;
    var cenY = canvas.height / 2;
    var img = new Image();
    //这个变量用来决定小人的运动方向
    var dir = 0;
    img.src = "1.png";
    img.onload= function(){
        var width = img.width / 4;
        var height = img.height / 4;
        var stateIndex = 0;
        setInterval(function(){
            ctx.clearRect(0,0,canvas.width,canvas.height);
            ctx.drawImage(img, stateIndex * width ,  dir * height , width, height , cenX ,cenY , width, height );
            stateIndex ++;
            stateIndex %= 4;
     }, 1000/speed);
    }
    //给每一个按钮添加点击事件
    var left = document.getElementById("left");
    left.onclick = function(){
        dir = 1;
    }
    var right = document.getElementById("right");
    right.onclick = function(){
        dir = 2;
    }
     var down = document.getElementById("down");
    down.onclick = function(){
        dir = 3;
    }
     var up = document.getElementById("up");
    up.onclick = function(){
        dir = 0;
    }
    </script>
</body>
</html>