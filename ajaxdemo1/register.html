<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>注册界面</title>
</head>
<body>
	<h1>注册界面</h1>
	<form action="">
		用户名：  <input type="text" name="" id="username"><span id="username_result"></span><br>
		邮箱：	 <input type="text" name="" id="email"><span id="email_result"></span><br>
		手机号码： <input type="text" name="" id="phone"><span id="phone_result"></span><br>
	</form>
</body>
<script type="text/javascript">
		var username = document.getElementById("username");
		var email = document.getElementById("email");
		var phone = document.getElementById("phone");

		username.onblur = function() {
			var usernameValue = username.value;
			//讲usernamevalue提交给服务器。
			// 1.创建对象
			var xhr = null;
			if(window.XMLHttpRequest) {
				xhr = new  XMLHttpRequest();
			} else {
				xhr = new activeObject("Microsoft.XMLHTTP");
			}
			//2/准备发送
			xhr.open("get","server/checkUsername.php?uname="+usernameValue,true);
			//3.执行发送。
			xhr.send(null);
			//4.指定我们的回调函数
			xhr.onreadystatechange = function() {
				if(xhr.readyState == 4) {
					if(xhr.status == 200) {
						var result = xhr.responseText;
						var username_result = document.querySelector("#username_result");
						if (result == "ok") {
								username_result.innerText = "用户名可以使用";
						}	else {
								username_result.innerText = "用户名已经被注册";
						}
					}
				}
			};
		};


		email.onblur = function() {
			var emailValue = email.value;
			var xhr = null;
			if(window.XMLHttpRequest){
				xhr = new  XMLHttpRequest();
			} else {
				xhr = new ActiveXObject('Microsoft.XMLHTTP');
			}
			var parm = "e=" + emailValue;  
			xhr.open("post","server/checkEmail.php",true);
			xhr.setRequestHeader("content-type", "application/x-www-form-urlencoded");
			xhr.send(parm);

			xhr.onreadystatechange  = function() {
				if(xhr.readyState ==4) {
					if(xhr.status ==200) {
						var result = xhr.responseText;
						var email_result = document.getElementById("email_result");
						if(result== 0) {
							//邮箱可用
							email_result.innerText = "邮箱可以使用";
						}else {
							email_result.innerText = "邮箱爆炸了";
						}
					}
				}
			}
		};


		phone.onblur = function() {
			//这个我不写了。
		};
</script>
</html>




























